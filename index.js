const t=t=>{const e=String(t).match(/^(\d+(?:\.\d+)?)(.*)$/);return[parseFloat(e[1]),e[2]]},e={px:1/16,em:1,rem:1},n=n=>(r,s=n)=>{const[o,u]=(l=n,t=>{if("number"==typeof t)return[t,l];const e=t.match(/^(\d+(?:\.\d+)?)(px|em|rem)?$/);if(!e)throw new Error(`Неизвестная единица измерения: ${t}`);const[,n,r]=e;return[parseFloat(n),r||l]})(r);var l;const c=((t,n)=>r=>t===n?r:r*(e[t]/e[n]))(u,s)(o),i=`${c}${s}`,a=function(){return i};return a.value=i,a.isUnit=!0,a.toNumber=function(){return t(this.value)[0]},a[Symbol.toPrimitive]=function(e){return"string"===e?this.value.toString():"number"===e?this.value?t(this.value)[0]:0:this.value},a},r=t=>Array.from(t.slice(1),((e,n)=>parseInt(t.slice(2*n+1,2*n+3),16))),s=new Map([["rgb",/rgb\((\d+),\s*(\d+),\s*(\d+)\)/],["rgba",/rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d+(\.\d+)?)\)/],["hex",/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i]]),o=new Map([["rgb",t=>`rgb(${t.slice(0,3).join(", ")})`],["rgba",t=>`rgba(${[...t.slice(0,3),1].join(", ")})`],["hex",t=>"#"+t.map((t=>t.toString(16).padStart(2,"0"))).join("")]]),u=(t,e="rgb")=>{const{format:n,values:u}=(t=>{for(const[e,n]of s){const s=t.match(n);if(s)return{format:e,values:"hex"===e?r(t):s.slice(1).map(Number)}}throw new Error("Unsupported color format")})(t);if(n===e)return t;const l=o.get(e);if(!l)throw new Error("Unsupported target format");return l(u)},l=t=>"object"==typeof t&&null!==t&&"isUnit"in t,c=t=>"function"==typeof t?t():t;function i(t,e,n){const{condition:r,onTrue:s,onFalse:o}="boolean"==typeof t?{condition:t,onTrue:e,onFalse:n}:t;if(void 0===s||void 0===o)throw new Error("Invalid arguments");const u=c(r?s:o);return l(u)?String(u):u}function a(t,e,n=void 0){let r;var s;(s=t)&&"object"==typeof s&&"input"in s&&"cases"in s?({input:r,cases:e,onDeafult:n}=t):r=t;const o=l(u=r)?u.toNumber():u;var u;const i=e.find((([t])=>t(o)))?.[1]??n,a=c(i);return l(a)?a[Symbol.toPrimitive]("string"):a}function f(t,e,n,r={},s=((t,e,n)=>`& .${t}-${e+1}`)){let o;return"number"==typeof t?o=t:(({count:o,name:e,css:n,context:r,formatter:s}=t),r=r||{},s=s||((t,e,n)=>`& .${t}-${e+1}`)),Array.from({length:o}).reduce(((t,u,l)=>{const c="function"==typeof n?n(l,o,r):n;return t[s(e,l,r)]={...c},t}),{})}const p={equals:(t,e)=>t===e};let h=U;const d=1,v=2,b={owned:null,cleanups:null,context:null,owner:null};var g=null;let m,w=null,y=null,S=null,x=null,A=0;function $(t,e,n){h=q;const r=function(t,e,n,r=d,s){const o={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:g,context:null,pure:n};null===g||g!==b&&(g.owned?g.owned.push(o):g.owned=[o]);return o}(t,e,!1,d),s=m&&k(g,m.id);s&&(r.suspense=s),n&&n.render||(r.user=!0),x?x.push(r):F(r)}function E(){if(this.sources&&this.state)if(this.state===d)F(this);else{const t=S;S=null,T((()=>I(this)),!1),S=t}if(y){const t=this.observers?this.observers.length:0;y.sources?(y.sources.push(this),y.sourceSlots.push(t)):(y.sources=[this],y.sourceSlots=[t]),this.observers?(this.observers.push(y),this.observerSlots.push(y.sources.length-1)):(this.observers=[y],this.observerSlots=[y.sources.length-1])}return this.value}function j(t,e,n){let r=t.value;return t.comparator&&t.comparator(r,e)||(t.value=e,t.observers&&t.observers.length&&T((()=>{for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e],r=w&&w.running;r&&w.disposed.has(n),(r?n.tState:n.state)||(n.pure?S.push(n):x.push(n),n.observers&&M(n)),r||(n.state=d)}if(S.length>1e6)throw S=[],new Error}),!1)),e}function F(t){if(!t.fn)return;P(t);const e=g,n=y,r=A;y=g=t,function(t,e,n){let r;try{r=t.fn(e)}catch(e){return t.pure&&(t.state=d,t.owned&&t.owned.forEach(P),t.owned=null),t.updatedAt=n+1,R(e)}(!t.updatedAt||t.updatedAt<=n)&&(null!=t.updatedAt&&"observers"in t?j(t,r):t.value=r,t.updatedAt=n)}(t,t.value,r),y=n,g=e}function N(t){if(0===t.state)return;if(t.state===v)return I(t);if(t.suspense&&function(t){if(null===y)return t();const e=y;y=null;try{return t()}finally{y=e}}(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<A);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if((t=e[n]).state===d)F(t);else if(t.state===v){const n=S;S=null,T((()=>I(t,e[0])),!1),S=n}}function T(t,e){if(S)return t();let n=!1;e||(S=[]),x?n=!0:x=[],A++;try{const e=t();return function(t){S&&(U(S),S=null);if(t)return;const e=x;x=null,e.length&&T((()=>h(e)),!1)}(n),e}catch(t){n||(x=null),S=null,R(t)}}function U(t){for(let e=0;e<t.length;e++)N(t[e])}function q(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:N(r)}for(e=0;e<n;e++)N(t[e])}function I(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const t=r.state;t===d?r!==e&&(!r.updatedAt||r.updatedAt<A)&&N(r):t===v&&I(r,e)}}}function M(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=v,n.pure?S.push(n):x.push(n),n.observers&&M(n))}}function P(t){let e;if(t.sources)for(;t.sources.length;){const e=t.sources.pop(),n=t.sourceSlots.pop(),r=e.observers;if(r&&r.length){const t=r.pop(),s=e.observerSlots.pop();n<r.length&&(t.sourceSlots[s]=n,r[n]=t,e.observerSlots[n]=s)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)P(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function R(t){throw t}function k(t,e){return t?t.context&&void 0!==t.context[e]?t.context[e]:k(t.owner,e):void 0}let D=null;const O=()=>D??=document.querySelectorAll("style[data-stitches]"),z=(t,e)=>t.cssText.includes(e);function B(t,e){return function(n){const[r,s]=function(t,e){const n={value:t,observers:null,observerSlots:null,comparator:(e=e?Object.assign({},p,e):p).equals||void 0};return[E.bind(n),t=>("function"==typeof t&&(t=t(n.value)),j(n,t))]}(t({})());return $((()=>{const r=t({...e(n)});var o;o=r.className,O().forEach((t=>{Array.from(t.sheet?.cssRules||[]).filter((t=>!z(t,o))).forEach((e=>{t.sheet?.insertRule(e.cssText)}))})),s(r())})),r}}export{u as color,B as createStyledHook,n as createUnit,f as loop,a as switcher,i as when};
//# sourceMappingURL=index.js.map
