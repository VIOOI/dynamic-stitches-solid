const e={equals:(e,t)=>e===t};let t=w;const s=1,n=2,o={owned:null,cleanups:null,context:null,owner:null};var r=null;let u,l=null,c=null,i=null,a=null,f=0;function h(e,n,l){t=A;const c=function(e,t,n,u=s,l){const c={fn:e,state:u,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:r,context:null,pure:n};null===r||r!==o&&(r.owned?r.owned.push(c):r.owned=[c]);return c}(e,n,!1,s),i=u&&E(r,u.id);i&&(c.suspense=i),l&&l.render||(c.user=!0),a?a.push(c):v(c)}function p(){if(this.sources&&this.state)if(this.state===s)v(this);else{const e=i;i=null,g((()=>S(this)),!1),i=e}if(c){const e=this.observers?this.observers.length:0;c.sources?(c.sources.push(this),c.sourceSlots.push(e)):(c.sources=[this],c.sourceSlots=[e]),this.observers?(this.observers.push(c),this.observerSlots.push(c.sources.length-1)):(this.observers=[c],this.observerSlots=[c.sources.length-1])}return this.value}function d(e,t,n){let o=e.value;return e.comparator&&e.comparator(o,t)||(e.value=t,e.observers&&e.observers.length&&g((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t],o=l&&l.running;o&&l.disposed.has(n),(o?n.tState:n.state)||(n.pure?i.push(n):a.push(n),n.observers&&x(n)),o||(n.state=s)}if(i.length>1e6)throw i=[],new Error}),!1)),t}function v(e){if(!e.fn)return;y(e);const t=r,n=c,o=f;c=r=e,function(e,t,n){let o;try{o=e.fn(t)}catch(t){return e.pure&&(e.state=s,e.owned&&e.owned.forEach(y),e.owned=null),e.updatedAt=n+1,m(t)}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?d(e,o):e.value=o,e.updatedAt=n)}(e,e.value,o),c=n,r=t}function b(e){if(0===e.state)return;if(e.state===n)return S(e);if(e.suspense&&function(e){if(null===c)return e();const t=c;c=null;try{return e()}finally{c=t}}(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<f);)e.state&&t.push(e);for(let o=t.length-1;o>=0;o--)if((e=t[o]).state===s)v(e);else if(e.state===n){const s=i;i=null,g((()=>S(e,t[0])),!1),i=s}}function g(e,s){if(i)return e();let n=!1;s||(i=[]),a?n=!0:a=[],f++;try{const s=e();return function(e){i&&(w(i),i=null);if(e)return;const s=a;a=null,s.length&&g((()=>t(s)),!1)}(n),s}catch(e){n||(a=null),i=null,m(e)}}function w(e){for(let t=0;t<e.length;t++)b(e[t])}function A(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:b(n)}for(t=0;t<s;t++)b(e[t])}function S(e,t){e.state=0;for(let o=0;o<e.sources.length;o+=1){const r=e.sources[o];if(r.sources){const e=r.state;e===s?r!==t&&(!r.updatedAt||r.updatedAt<f)&&b(r):e===n&&S(r,t)}}}function x(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=n,s.pure?i.push(s):a.push(s),s.observers&&x(s))}}function y(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),s=e.sourceSlots.pop(),n=t.observers;if(n&&n.length){const e=n.pop(),o=t.observerSlots.pop();s<n.length&&(e.sourceSlots[o]=s,n[s]=e,t.observerSlots[s]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)y(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function m(e){throw e}function E(e,t){return e?e.context&&void 0!==e.context[t]?e.context[t]:E(e.owner,t):void 0}let q=null;const R=()=>q??=document.querySelectorAll("style[data-stitches]"),T=(e,t)=>e.cssText.includes(t);function j(e){R().forEach((t=>{Array.from(t.sheet?.cssRules||[]).filter((t=>!T(t,e))).forEach((e=>{t.sheet?.insertRule(e.cssText)}))}))}function k(t,s){return function(n){const[o,r]=function(t,s){const n={value:t,observers:null,observerSlots:null,comparator:(s=s?Object.assign({},e,s):e).equals||void 0};return[p.bind(n),e=>("function"==typeof e&&(e=e(n.value)),d(n,e))]}(t({})());return h((()=>{const e=t({...s(n)});j(e.className),r(e())})),o}}export{k as createStyledHook,j as removeStyles};
//# sourceMappingURL=index.js.map
